<div id="compare-items"></div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Fetch compare items from localStorage
    const compareProducts = JSON.parse(localStorage.getItem('compareProducts')) || [];

    if (compareProducts.length > 0) {
      fetch('/products.json') // Assuming this endpoint returns product data
        .then(response => response.json())
        .then(data => {
          const products = data.products.filter(product => compareProducts.includes(product.handle));
          const compareContainer = document.getElementById('compare-items');
          products.forEach(product => {
            const price = product.variants[0].price; // Assuming the price is in the first variant

            compareContainer.innerHTML += `
              <div class="product">
                <a href="/products/${product.handle}">
                  <img src="${product.images[0].src}" alt="${product.title}">
                  <h2>${product.title}</h2>
                  <p>${price} ${Shopify.currency.active}</p> <!-- Display the product price -->
                </a>
              </div>
            `;
          });
        });
    } else {
      document.getElementById('compare-items').innerHTML = '<p>No products added to compare.</p>';
    }
  });
</script>
